---
title: è®¡ç®—å³ä¾§å°äºå½“å‰å…ƒç´ çš„ä¸ªæ•°-LeetCode
categories: ä½œä¸šç»ƒä¹ 
tags:
  - LeetCode
æ•°æ®ç»“æ„:
  - æ•°ç»„
  - åˆ†æ²»
  - å½’å¹¶æ’åº
date: 2025-12-16
---
# è®¡ç®—å³ä¾§å°äºå½“å‰å…ƒç´ çš„ä¸ªæ•°

## ğŸ¯ é—®é¢˜æè¿°ï¼ˆæ¥æºäºLeetCodeï¼‰
**æè¿°**ï¼š
ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„Â `nums`Â ï¼ŒæŒ‰è¦æ±‚è¿”å›ä¸€ä¸ªæ–°æ•°ç»„Â `counts`Â ã€‚æ•°ç»„Â `counts`Â æœ‰è¯¥æ€§è´¨ï¼šÂ `counts[i]`Â çš„å€¼æ˜¯Â Â `nums[i]`Â å³ä¾§å°äºÂ `nums[i]`Â çš„å…ƒç´ çš„æ•°é‡ã€‚
**è¯´æ˜**ï¼š
- `1 <= nums.length <= 105`
- `-104 <= nums[i] <= 104`
**ç¤ºä¾‹**ï¼š

- ç¤ºä¾‹ 1ï¼š

```text
è¾“å…¥ï¼šnums = [5,2,6,1]
è¾“å‡ºï¼š[2,1,1,0]  
è§£é‡Šï¼š
5 çš„å³ä¾§æœ‰ 2 ä¸ªæ›´å°çš„å…ƒç´  (2 å’Œ 1)
2 çš„å³ä¾§ä»…æœ‰ 1 ä¸ªæ›´å°çš„å…ƒç´  (1)
6 çš„å³ä¾§æœ‰1ä¸ªæ›´å°çš„å…ƒç´  (1)
1 çš„å³ä¾§æœ‰0ä¸ªæ›´å°çš„å…ƒç´ 
```

- ç¤ºä¾‹ 2ï¼š

```text
è¾“å…¥ï¼šnums = [-1]
è¾“å‡ºï¼š[0]
```
## ğŸ’» è§£é¢˜æ€è·¯
### æ€è·¯1ï¼šåœ¨å½’å¹¶è¿‡ç¨‹ä¸­è®¡æ•°
#### æ€è·¯1ï¼šä»£ç å®ç°
```python
class Solution:
    def countSmaller(self, nums: List[int]) -> List[int]:
        n = len(nums)
        ans = [0] * n        
        arr = [(nums[i], i) for i in range(n)]
        def merge_sort(arr, left, right):
            if left >= right:
                return
            mid = (left + right) // 2
            merge_sort(arr, left, mid)
            merge_sort(arr, mid + 1, right)
            merge(arr, left, mid, right)
        def merge(arr, left, mid, right):
            temp = []
            i, j = left, mid + 1
            while i <= mid and j <= right:
                if arr[i][0] <= arr[j][0]:
                    ans[arr[i][1]] += (j - (mid + 1))
                    temp.append(arr[i])
                    i += 1
                else:
                    temp.append(arr[j])
                    j += 1
            while i <= mid:
                ans[arr[i][1]] += (j - (mid + 1))
                temp.append(arr[i])
                i += 1
            while j <= right:
                temp.append(arr[j])
                j += 1
            for k in range(left, right + 1):
                arr[k] = temp[k - left]
        
        merge_sort(arr, 0, n - 1)
        return ans
```
#### æ€è·¯1ï¼šğŸ“Š æ€§èƒ½åˆ†æ
##### æäº¤ç»“æœ
- **è¿è¡Œæ—¶é—´**ï¼š1459mså‡»è´¥39.86%
- **å†…å­˜æ¶ˆè€—**ï¼š47.17MBå‡»è´¥36.36%
##### å¤æ‚åº¦éªŒè¯
- æ—¶é—´å¤æ‚åº¦ï¼š$O(NLogN)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(N)$
#### æ€è€ƒ
å½’å¹¶è¿‡ç¨‹å®é™…ä¸Šå·²ç»åœ¨å¯¹é€†åºå¯¹å°äºæ•°è®¡æ•°äº†ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨è¿‡ç¨‹å°†å…¶è®°å½•å³å¯